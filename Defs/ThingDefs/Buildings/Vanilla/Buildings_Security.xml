<?xml version="1.0" encoding="utf-8" ?>
<ThingDefs>


	<ThingDef Name="BuildingBase" Abstract="True">
		<category>Building</category>
		<soundImpactDefault>BulletImpactMetal</soundImpactDefault>
		<selectable>true</selectable>
		<drawerType>MapMeshAndRealTime</drawerType>
		<terrainAffordanceNeeded>Light</terrainAffordanceNeeded>
		<repairEffect>Repair</repairEffect>
		<leaveResourcesWhenKilled>true</leaveResourcesWhenKilled>
		<filthLeaving>BuildingRubble</filthLeaving>
		<researchPrerequisite>Blocked</researchPrerequisite>
	</ThingDef>


	<ThingDef ParentName="BuildingBase">
		<defName>Sandbags</defName>
		<label>sandbags</label>
		<thingClass>Building</thingClass>
		<category>Building</category>
		<graphicData>
			<texPath>Things/Building/Linked/Sandbags_Atlas</texPath>
			<graphicClass>Graphic_Single</graphicClass>
			<linkType>Basic</linkType>
			<linkFlags>
				<li>Sandbags</li>
			</linkFlags>
		</graphicData>
		<blueprintGraphicData>
			<texPath>Things/Building/Linked/Sandbags_Blueprint_Atlas</texPath>
		</blueprintGraphicData>
		<uiIconPath>Things/Building/Linked/Sandbags_MenuIcon</uiIconPath>
		<altitudeLayer>Waist</altitudeLayer>
		<pathCost>40</pathCost>
		<passability>PassThroughOnly</passability>
		<castEdgeShadows>true</castEdgeShadows>
		<fillPercent>0.65</fillPercent>
		<statBases>
			<MaxHitPoints>450</MaxHitPoints>
			<Beauty>-10</Beauty>
			<WorkToMake>180</WorkToMake>
			<Flammability>0</Flammability>
		</statBases>
		<building>
			<isInert>true</isInert>
		</building>
		<description>Cover from gunfire.</description>
		<placingDraggableDimensions>1</placingDraggableDimensions>
		<costList>
			<Steel>3</Steel>
		</costList>
		<filthLeaving>SandbagRubble</filthLeaving>
		<rotatable>false</rotatable>
		<selectable>true</selectable>
		<neverMultiSelect>true</neverMultiSelect>
		<terrainAffordanceNeeded>Light</terrainAffordanceNeeded>
		<staticSunShadowHeight>0.20</staticSunShadowHeight>
		<constructEffect>ConstructDirt</constructEffect>
		<repairEffect>ConstructDirt</repairEffect>
	</ThingDef>


	<!--=============== Improvised turret ===============-->
	
	
	<ThingDef ParentName="BuildingBase">
		<defName>TurretGun</defName>
		<label>improvised turret</label>
		<thingClass>Building_TurretGun</thingClass>
		<graphicData>
			<texPath>Things/Building/Security/TurretImprovised</texPath>
			<graphicClass>Graphic_Single</graphicClass>
			<drawSize>(3,3)</drawSize>
		</graphicData>
		<altitudeLayer>Waist</altitudeLayer>
		<statBases>
			<MaxHitPoints>110</MaxHitPoints>
			<Flammability>1.0</Flammability>
			<WorkToMake>2500</WorkToMake>
			<Beauty>-60</Beauty>
		</statBases>
		<tickerType>Normal</tickerType>
		<comps>
			<li>
				<compClass>CompExplosive</compClass>
				<explosiveRadius>3.9</explosiveRadius>
				<explosiveDamageType>Bomb</explosiveDamageType>
			</li>
			<li>
				<compClass>CompForbiddable</compClass>
			</li>
			<li>
				<compClass>CompPowerTrader</compClass>
				<basePowerConsumption>350</basePowerConsumption>
			</li>
		</comps>
		<description>A weak improvised turret that automatically fires at nearby enemies. Explodes when damaged.</description>
		<passability>PassThroughOnly</passability>
		<pathCost>50</pathCost>
		<fillPercent>0.4</fillPercent>
		<castEdgeShadows>true</castEdgeShadows>
		<hasTooltip>true</hasTooltip>
		<stuffCategories>
			<li>Metallic</li>
		</stuffCategories>
		<costStuffCount>75</costStuffCount>
		<costList>
			<Steel>75</Steel>
		</costList>
		<combatTargetBuilding>true</combatTargetBuilding>
		<terrainAffordanceNeeded>Light</terrainAffordanceNeeded>
		<specialDisplayRadius>25.9</specialDisplayRadius>
		<building>
			<ai_combatDangerous>true</ai_combatDangerous>
			<turretGunDef>Gun_TurretImprovised</turretGunDef>
			<turretBurstCooldownTicks>400</turretBurstCooldownTicks>
			<turretTopgraphicPath>Things/Building/Security/TurretImprovised_Top</turretTopgraphicPath>
		</building>
	</ThingDef>


	<!--=============== Mortar turret ===============-->
	
	
	<ThingDef ParentName="BuildingBase">
		<defName>Turret_MortarBomb</defName>
		<label>mortar</label>
		<thingClass>Building_TurretGun</thingClass>
		<graphicData>
			<texPath>Things/Building/Security/TurretMortarBase</texPath>
			<graphicClass>Graphic_Single</graphicClass>
			<drawSize>(4,4)</drawSize>
		</graphicData>
		<altitudeLayer>Waist</altitudeLayer>
		<hasInteractionCell>True</hasInteractionCell>
		<interactionCellOffset>(0,0,-1)</interactionCellOffset>
		<statBases>
			<MaxHitPoints>180</MaxHitPoints>
			<Flammability>1.0</Flammability>
			<WorkToMake>2700</WorkToMake>
			<Beauty>-60</Beauty>
		</statBases>
		<tickerType>Normal</tickerType>
		<comps>
			<li>
				<compClass>CompExplosive</compClass>
				<explosiveRadius>4.9</explosiveRadius>
				<explosiveDamageType>Bomb</explosiveDamageType>
			</li>
			<li>
				<compClass>CompForbiddable</compClass>
			</li>
			<li>
				<compClass>CompMannable</compClass>
				<manWorkType>Violent</manWorkType>
			</li>
		</comps>
		<description>A mortar that launches explosive shells. Must be manned. Explodes when damaged.</description>
		<size>(2,2)</size>
		<passability>PassThroughOnly</passability>
		<pathCost>50</pathCost>
		<fillPercent>0.4</fillPercent>
		<castEdgeShadows>true</castEdgeShadows>
		<stuffCategories>
			<li>Metallic</li>
		</stuffCategories>
		<costStuffCount>100</costStuffCount>
		<costList>
			<Steel>150</Steel>
		</costList>
		<combatTargetBuilding>true</combatTargetBuilding>
		<terrainAffordanceNeeded>Light</terrainAffordanceNeeded>
		<building>
			<turretGunDef>Artillery_MortarBomb</turretGunDef>
			<turretShellDef>ArtilleryShell</turretShellDef>
			<turretBurstWarmupTicks>300</turretBurstWarmupTicks>
			<turretBurstCooldownTicks>3000</turretBurstCooldownTicks>
			<turretTopgraphicPath>Things/Building/Security/TurretMortarBomb_Top</turretTopgraphicPath>
			<buildingTags>
				<li>Artillery</li>
				<li>Artillery_BaseDestroyer</li>
			</buildingTags>
		</building>
		<placeWorkers>
			<li>PlaceWorker_NotUnderRoof</li>
		</placeWorkers>
		<researchPrerequisite>Mortars</researchPrerequisite>
	</ThingDef>


	<!--=============== Mortar turret ===============-->
	
	
	<ThingDef ParentName="BuildingBase">
		<defName>Turret_MortarIncendiary</defName>
		<label>incendiary mortar</label>
		<thingClass>Building_TurretGun</thingClass>
		<graphicData>
			<texPath>Things/Building/Security/TurretMortarBase</texPath>
			<graphicClass>Graphic_Single</graphicClass>
			<drawSize>(4,4)</drawSize>
		</graphicData>
		<altitudeLayer>Waist</altitudeLayer>
		<hasInteractionCell>True</hasInteractionCell>
		<interactionCellOffset>(0,0,-1)</interactionCellOffset>
		<statBases>
			<MaxHitPoints>180</MaxHitPoints>
			<Flammability>1.0</Flammability>
			<WorkToMake>2700</WorkToMake>
			<Beauty>-60</Beauty>
		</statBases>
		<tickerType>Normal</tickerType>
		<comps>
			<li>
				<compClass>CompExplosive</compClass>
				<explosiveRadius>4.9</explosiveRadius>
				<explosiveDamageType>Flame</explosiveDamageType>
			</li>
			<li>
				<compClass>CompForbiddable</compClass>
			</li>
			<li>
				<compClass>CompMannable</compClass>
				<manWorkType>Violent</manWorkType>
			</li>
		</comps>
		<description>A mortar that launches incendiary shells. Must be manned. Explodes when damaged.</description>
		<size>(2,2)</size>
		<passability>PassThroughOnly</passability>
		<pathCost>50</pathCost>
		<fillPercent>0.4</fillPercent>
		<castEdgeShadows>true</castEdgeShadows>
		<stuffCategories>
			<li>Metallic</li>
		</stuffCategories>
		<costStuffCount>100</costStuffCount>
		<costList>
			<Steel>150</Steel>
		</costList>
		<combatTargetBuilding>true</combatTargetBuilding>
		<terrainAffordanceNeeded>Light</terrainAffordanceNeeded>
		<building>
			<turretGunDef>Artillery_MortarIncendiary</turretGunDef>
			<turretShellDef>ArtilleryShell</turretShellDef>
			<turretBurstWarmupTicks>300</turretBurstWarmupTicks>
			<turretBurstCooldownTicks>3000</turretBurstCooldownTicks>
			<turretTopgraphicPath>Things/Building/Security/TurretMortarIncendiary_Top</turretTopgraphicPath>
			<buildingTags>
				<li>Artillery</li>
				<li>Artillery_BaseDestroyer</li>
			</buildingTags>
		</building>
		<placeWorkers>
			<li>PlaceWorker_NotUnderRoof</li>
		</placeWorkers>
		<researchPrerequisite>Mortars</researchPrerequisite>
	</ThingDef>


	<!--=============== Mortar EMP ===============-->
	
	
	<ThingDef ParentName="BuildingBase">
		<defName>Turret_MortarEMP</defName>
		<label>EMP mortar</label>
		<thingClass>Building_TurretGun</thingClass>
		<graphicData>
			<texPath>Things/Building/Security/TurretMortarBase</texPath>
			<graphicClass>Graphic_Single</graphicClass>
			<drawSize>(4,4)</drawSize>
		</graphicData>
		<altitudeLayer>Waist</altitudeLayer>
		<hasInteractionCell>True</hasInteractionCell>
		<interactionCellOffset>(0,0,-1)</interactionCellOffset>
		<statBases>
			<MaxHitPoints>180</MaxHitPoints>
			<Flammability>1.0</Flammability>
			<WorkToMake>2700</WorkToMake>
			<Beauty>-60</Beauty>
		</statBases>
		<tickerType>Normal</tickerType>
		<comps>
			<li>
				<compClass>CompExplosive</compClass>
				<explosiveRadius>4.9</explosiveRadius>
				<explosiveDamageType>EMP</explosiveDamageType>
			</li>
			<li>
				<compClass>CompForbiddable</compClass>
			</li>
			<li>
				<compClass>CompMannable</compClass>
				<manWorkType>Violent</manWorkType>
			</li>
		</comps>
		<description>A mortar that launches EMP bombs. Must be manned. Explodes when damaged.</description>
		<size>(2,2)</size>
		<passability>PassThroughOnly</passability>
		<pathCost>50</pathCost>
		<fillPercent>0.4</fillPercent>
		<castEdgeShadows>true</castEdgeShadows>
		<stuffCategories>
			<li>Metallic</li>
		</stuffCategories>
		<costStuffCount>100</costStuffCount>
		<costList>
			<Steel>150</Steel>
		</costList>
		<combatTargetBuilding>true</combatTargetBuilding>
		<terrainAffordanceNeeded>Light</terrainAffordanceNeeded>
		<building>
			<turretGunDef>Artillery_MortarEMP</turretGunDef>
			<turretShellDef>ArtilleryShell</turretShellDef>
			<turretBurstWarmupTicks>300</turretBurstWarmupTicks>
			<turretBurstCooldownTicks>3000</turretBurstCooldownTicks>
			<turretTopgraphicPath>Things/Building/Security/TurretMortarEMP_Top</turretTopgraphicPath>
			<buildingTags>
				<li>Artillery</li>
			</buildingTags>
		</building>
		<placeWorkers>
			<li>PlaceWorker_NotUnderRoof</li>
		</placeWorkers>
		<researchPrerequisite>Mortars</researchPrerequisite>
	</ThingDef>
	

	<!--==================== Traps ======================== -->


	<ThingDef ParentName="BuildingBase">
		<defName>TrapIEDBomb</defName>
		<label>IED trap</label>
		<thingClass>Building_TrapExplosive</thingClass>
		<graphicData>
			<texPath>Things/Building/Security/IEDBomb</texPath>
			<graphicClass>Graphic_Single</graphicClass>
		</graphicData>
		<altitudeLayer>Waist</altitudeLayer>
		<drawerType>RealtimeOnly</drawerType>
		<rotatable>false</rotatable>
		<tickerType>Normal</tickerType>
		<statBases>
			<MaxHitPoints>40</MaxHitPoints>
			<WorkToMake>5000</WorkToMake>
			<Beauty>-4</Beauty>
			<TrapSpringChance>0.8</TrapSpringChance>
		</statBases>
		<description>An artillery shell connected to a homemade trigger. When someone disturbs the trigger, the shell explodes. The improvised trigger has a random delay that might allow a nimble enemy to escape.</description>
		<costList>
			<ArtilleryShell>1</ArtilleryShell>
			<Steel>50</Steel>
		</costList>
		<building>
			<isTrap>true</isTrap>
		</building>
		<comps>
			<li>
				<compClass>CompExplosive</compClass>
				<explosiveRadius>2.9</explosiveRadius>
				<explosiveDamageType>Bomb</explosiveDamageType>
				<startWickHitPointsPercent>0.2</startWickHitPointsPercent>
				<wickTicks>
					<min>15</min>
					<max>80</max>
				</wickTicks>
			</li>
		</comps>
		<researchPrerequisite>IEDBomb</researchPrerequisite>
	</ThingDef>


	<ThingDef ParentName="BuildingBase">
		<defName>TrapIEDIncendiary</defName>
		<label>IED incendiary trap</label>
		<thingClass>Building_TrapExplosive</thingClass>
		<graphicData>
			<texPath>Things/Building/Security/IEDIncendiary</texPath>
			<graphicClass>Graphic_Single</graphicClass>
		</graphicData>
		<altitudeLayer>Waist</altitudeLayer>
		<drawerType>RealtimeOnly</drawerType>
		<rotatable>false</rotatable>
		<tickerType>Normal</tickerType>
		<statBases>
			<MaxHitPoints>40</MaxHitPoints>
			<WorkToMake>5000</WorkToMake>
			<Beauty>-4</Beauty>
			<TrapSpringChance>0.8</TrapSpringChance>
		</statBases>
		<description>Explosives mixed into an incendiary paste with a chemical trigger for dispersal. Its chemical trigger is simple and reliable.</description>
		<costList>
			<ArtilleryShell>1</ArtilleryShell>
			<Steel>50</Steel>
		</costList>
		<building>
			<isTrap>true</isTrap>
		</building>
		<comps>
			<li>
				<compClass>CompExplosive</compClass>
				<explosiveRadius>2.9</explosiveRadius>
				<explosiveDamageType>Flame</explosiveDamageType>
				<startWickHitPointsPercent>0.2</startWickHitPointsPercent>
				<wickTicks>
					<min>10</min>
					<max>60</max>
				</wickTicks>
			</li>
		</comps>
		<researchPrerequisite>IEDIncendiary</researchPrerequisite>
	</ThingDef>


</ThingDefs>